use["../../../dev_env/imports/list.gl"]
str = import["../../../dev_env/imports/string.gl"]

to_obj = [data] => {

    if [data.length == ""] => {
        ret []
    }

    data = data 
    -> str.split["\n"]
    -> pop_f
    -> [x] => { x.front = x.front -> str.split[","] ret x }
    -> [x] => { x.rest = x.rest -> filter[[elem] => { ret elem.length > 0 }] ret x}
    -> [x] => { x.rest = x.rest -> map[[elem] => { ret (elem -> str.split[","]) }] ret x }
    -> [x] => {
        _list = []
        for [x.rest i value] => {
            obj = @{}
            for [value j v] => {
                obj.[x.front.[j]] = v
            }
            _list = _list + obj
        }
        ret _list
    }

    ret data
}