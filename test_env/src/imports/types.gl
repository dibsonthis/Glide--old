ls = import["_imports/list.gl"]
obj = import["_imports/object.gl"]

get_type = [_object] => {
    _type = type[_object]

    if [_type == list] => {
        type_list = _object -> ls.map[[x] => { get_type[x] }] -> ls.unique -> ls.sort
        ret type_list
    }

    if [_type != object] => {
        ret _type
    }

    type_obj = @{}

    for [_object._keys index key] => {
        type_obj.[key] = get_type[_object.[key]]
    }

    ret type_obj
}

is_type = [_type value] => {
    calculated_type = type[value]
    if [calculated_type == object] => {
        ret (value -> get_type, _type) -> obj.equal
    }
    ret (calculated_type == _type)
}